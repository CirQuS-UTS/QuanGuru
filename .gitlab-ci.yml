stages:
    - demo
    - lint

demo:
    stage: demo
    tags:
        - qsimulations
    script:
        - echo qSims

pylint:
    stage: lint
    tags:
        - qsimulations
    before_script:
        - pip install pylint pylint-exit anybadge
    script:
        - mkdir ./pylint
        - pylint --output-format=text . | tee ./pylint/pylint.log || pylint-exit $?
        - PYLINT_SCORE=$(sed -n 's/^Your code has been rated at \([-0-9.]*\)\/.*/\1/p' ./pylint/pylint.log)
        - anybadge --label=Pylint --file=pylint/pylint.svg --value=$PYLINT_SCORE 2=red 4=orange 8=yellow 10=green
        - echo "Pylint score is $PYLINT_SCORE"
    artifacts:
        paths:
            - ./pylint/